# ä¾èµ–ä¸Šä¸‹æ–‡ç­–ç•¥

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py)
- [context_builder.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\context_builder.py)
- [knowledge_store.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\knowledge_store.py)
- [agent_io_models.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\agent_io_models.py)
- [types.py](file://src\sentientresearchagent\hierarchical_agent_framework\types.py)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [æ ¸å¿ƒæœºåˆ¶åˆ†æ](#æ ¸å¿ƒæœºåˆ¶åˆ†æ)
3. [å‰ç½®ä¾èµ–è§£ææµç¨‹](#å‰ç½®ä¾èµ–è§£ææµç¨‹)
4. [å…³é”®è¾“å…¥ä¿éšœè®¾è®¡](#å…³é”®è¾“å…¥ä¿éšœè®¾è®¡)
5. [ä¾èµ–éªŒè¯æœºåˆ¶](#ä¾èµ–éªŒè¯æœºåˆ¶)
6. [æ—¥å¿—è°ƒè¯•ä¸æ•…éšœæ’é™¤](#æ—¥å¿—è°ƒè¯•ä¸æ•…éšœæ’é™¤)
7. [æ€»ç»“](#æ€»ç»“)

## å¼•è¨€
`DependencyContextStrategy` ç±»æ˜¯åˆ†å±‚æ™ºèƒ½ä½“æ¡†æ¶ä¸­çš„æ ¸å¿ƒä¸Šä¸‹æ–‡è§£æç­–ç•¥ä¹‹ä¸€ï¼Œè´Ÿè´£ä¸ºå½“å‰ä»»åŠ¡æä¾›æ¥è‡ªæ˜¾å¼ä¾èµ–ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¯¥ç­–ç•¥é€šè¿‡ä»»åŠ¡å›¾ä¸­å®šä¹‰çš„ `depends_on_indices` å­—æ®µå®šä½å‰ç½®ä¾èµ–ä»»åŠ¡ï¼Œå¹¶å°†å…¶è¾“å‡ºå†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡æ³¨å…¥åˆ°å½“å‰ä»»åŠ¡ä¸­ã€‚å…¶è®¾è®¡ä¼˜å…ˆçº§æœ€é«˜çš„æ˜¯ç¡®ä¿å…³é”®è¾“å…¥ä¸è¢«é—æ¼ï¼Œè¿™å¯¹äºå¤æ‚ä»»åŠ¡ç¼–æ’å’Œå¤šæ­¥éª¤æ¨ç†è‡³å…³é‡è¦ã€‚

## æ ¸å¿ƒæœºåˆ¶åˆ†æ
`DependencyContextStrategy` å®ç°äº† `ContextResolutionStrategy` æŠ½è±¡åŸºç±»ï¼Œé€šè¿‡ `get_context` æ–¹æ³•è·å–ä¾èµ–ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ã€‚è¯¥ç­–ç•¥é¦–å…ˆä»å½“å‰ä»»åŠ¡è®°å½•ä¸­æå–ä¾èµ–ç´¢å¼•ä¿¡æ¯ï¼Œç„¶åé€šè¿‡çˆ¶ä»»åŠ¡çš„ `child_task_ids_generated` åˆ—è¡¨å°†ç´¢å¼•è½¬æ¢ä¸ºå…·ä½“çš„ä»»åŠ¡IDï¼Œæœ€åéªŒè¯ä¾èµ–ä»»åŠ¡çš„çŠ¶æ€å’Œè¾“å‡ºå®Œæ•´æ€§ã€‚

```mermaid
classDiagram
class ContextResolutionStrategy {
<<abstract>>
+get_context(current_task_record, knowledge_store, processed_context_source_ids) List[ContextItem]
}
class DependencyContextStrategy {
+get_context(current_task_record, knowledge_store, processed_context_source_ids) List[ContextItem]
}
ContextResolutionStrategy <|-- DependencyContextStrategy
```

**å›¾è¡¨æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

**æœ¬èŠ‚æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

## å‰ç½®ä¾èµ–è§£ææµç¨‹
### ç´¢å¼•åˆ°ä»»åŠ¡IDçš„è½¬æ¢é€»è¾‘
ä¾èµ–ä¸Šä¸‹æ–‡ç­–ç•¥çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å°† `depends_on_indices` ä¸­çš„ç´¢å¼•å€¼è½¬æ¢ä¸ºå®é™…çš„ä»»åŠ¡IDã€‚è¿™ä¸€è¿‡ç¨‹ä¾èµ–äºçˆ¶ä»»åŠ¡çš„ `child_task_ids_generated` åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å­˜å‚¨äº†ç”±çˆ¶ä»»åŠ¡ç”Ÿæˆçš„æ‰€æœ‰å­ä»»åŠ¡IDã€‚

```mermaid
flowchart TD
Start([å¼€å§‹]) --> GetDependencies["è·å– depends_on_indices"]
GetDependencies --> HasDependencies{"å­˜åœ¨ä¾èµ–?"}
HasDependencies --> |å¦| ReturnEmpty["è¿”å›ç©ºä¸Šä¸‹æ–‡"]
HasDependencies --> |æ˜¯| CheckParent["æ£€æŸ¥æ˜¯å¦å­˜åœ¨çˆ¶ä»»åŠ¡"]
CheckParent --> HasParent{"å­˜åœ¨çˆ¶ä»»åŠ¡?"}
HasParent --> |å¦| LogWarning["è®°å½•è­¦å‘Šå¹¶è·³è¿‡"]
HasParent --> |æ˜¯| GetParentRecord["è·å–çˆ¶ä»»åŠ¡è®°å½•"]
GetParentRecord --> HasChildren{"çˆ¶ä»»åŠ¡æœ‰å­ä»»åŠ¡?"}
HasChildren --> |å¦| LogWarning
HasChildren --> |æ˜¯| ResolveIndex["éå†æ¯ä¸ªä¾èµ–ç´¢å¼•"]
ResolveIndex --> InRange{"ç´¢å¼•åœ¨èŒƒå›´å†…?"}
InRange --> |å¦| LogOutOfRange["è®°å½•è¶Šç•Œè­¦å‘Š"]
InRange --> |æ˜¯| GetTaskId["é€šè¿‡ç´¢å¼•è·å–ä»»åŠ¡ID"]
GetTaskId --> GetRecord["è·å–ä¾èµ–ä»»åŠ¡è®°å½•"]
GetRecord --> RecordExists{"è®°å½•å­˜åœ¨?"}
RecordExists --> |å¦| LogMissing["è®°å½•ç¼ºå¤±è­¦å‘Š"]
RecordExists --> |æ˜¯| CheckStatus["æ£€æŸ¥ä»»åŠ¡çŠ¶æ€"]
CheckStatus --> IsDone{"çŠ¶æ€ä¸ºDONE?"}
IsDone --> |å¦| LogNotCompleted["æœªå®Œæˆè­¦å‘Š"]
IsDone --> |æ˜¯| CheckOutput["æ£€æŸ¥è¾“å‡ºå†…å®¹"]
CheckOutput --> HasOutput{"æœ‰è¾“å‡ºå†…å®¹?"}
HasOutput --> |å¦| LogNoOutput["æ— è¾“å‡ºè­¦å‘Š"]
HasOutput --> |æ˜¯| ProcessContent["å¤„ç†å†…å®¹æ‘˜è¦"]
ProcessContent --> AddContext["æ·»åŠ åˆ°ä¸Šä¸‹æ–‡é¡¹"]
AddContext --> ContinueLoop["ç»§ç»­ä¸‹ä¸€ä¸ªä¾èµ–"]
ContinueLoop --> ResolveIndex
LogWarning --> End([ç»“æŸ])
LogOutOfRange --> End
LogMissing --> End
LogNotCompleted --> End
LogNoOutput --> End
ReturnEmpty --> End
```

**å›¾è¡¨æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

**æœ¬èŠ‚æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

### å†…å®¹å¤„ç†ä¸æ‘˜è¦ç”Ÿæˆ
å½“æˆåŠŸè·å–ä¾èµ–ä»»åŠ¡çš„è¾“å‡ºåï¼Œç­–ç•¥ä¼šæ ¹æ®å†…å®¹å¤§å°å’Œè´¨é‡å†³å®šå¦‚ä½•å¤„ç†ï¼š

1. **ç›´æ¥ä½¿ç”¨åŸå§‹å†…å®¹**ï¼šå¦‚æœåŸå§‹å†…å®¹å­—æ•°ä¸è¶…è¿‡ `TARGET_WORD_COUNT_FOR_CTX_SUMMARIES`ï¼ˆé»˜è®¤20000å­—ï¼‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚
2. **ä½¿ç”¨ç°æœ‰æ‘˜è¦**ï¼šå¦‚æœåŸå§‹å†…å®¹è¿‡å¤§ä½†ç°æœ‰æ‘˜è¦éé€šç”¨ä¸”é•¿åº¦åˆé€‚ï¼Œåˆ™ä½¿ç”¨ç°æœ‰æ‘˜è¦ã€‚
3. **é‡æ–°ç”Ÿæˆæ‘˜è¦**ï¼šå¦‚æœç°æœ‰æ‘˜è¦ä¸ºç©ºã€è¿‡äºé€šç”¨æˆ–è¿‡é•¿ï¼Œåˆ™è°ƒç”¨ `get_context_summary` å‡½æ•°é‡æ–°ç”Ÿæˆæ‘˜è¦ã€‚

```mermaid
flowchart TD
Start([å¼€å§‹]) --> CheckOriginalSize["æ£€æŸ¥åŸå§‹å†…å®¹å¤§å°"]
CheckOriginalSize --> SmallEnough{"å°äºç›®æ ‡å­—æ•°?"}
SmallEnough --> |æ˜¯| UseOriginal["ç›´æ¥ä½¿ç”¨åŸå§‹å†…å®¹"]
SmallEnough --> |å¦| CheckSummary["æ£€æŸ¥ç°æœ‰æ‘˜è¦"]
CheckSummary --> HasSummary{"æœ‰æ‘˜è¦?"}
HasSummary --> |å¦| NeedsProcessing["éœ€è¦å¤„ç†"]
HasSummary --> |æ˜¯| IsGeneric{"æ˜¯å¦é€šç”¨æ‘˜è¦?"}
IsGeneric --> |æ˜¯| NeedsProcessing
IsGeneric --> |å¦| CheckLength["æ£€æŸ¥æ‘˜è¦é•¿åº¦"]
CheckLength --> TooLong{"è¶…è¿‡1.2å€ç›®æ ‡é•¿åº¦?"}
TooLong --> |æ˜¯| NeedsProcessing
TooLong --> |å¦| UseExisting["ä½¿ç”¨ç°æœ‰æ‘˜è¦"]
NeedsProcessing --> HasOriginal{"æœ‰åŸå§‹å†…å®¹?"}
HasOriginal --> |æ˜¯| Summarize["è°ƒç”¨get_context_summaryç”Ÿæˆæ‘˜è¦"]
HasOriginal --> |å¦| Truncate["æˆªæ–­ç°æœ‰æ‘˜è¦"]
UseOriginal --> End([ç»“æŸ])
UseExisting --> End
Summarize --> End
Truncate --> End
```

**å›¾è¡¨æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)
- [utils.py](file://src\sentientresearchagent\hierarchical_agent_framework\agents\utils.py#L18-L79)

**æœ¬èŠ‚æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

## å…³é”®è¾“å…¥ä¿éšœè®¾è®¡
`DependencyContextStrategy` çš„è®¾è®¡é¦–è¦è€ƒé‡æ˜¯ç¡®ä¿å…³é”®è¾“å…¥ä¸è¢«é—æ¼ã€‚è¿™ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

1. **å¤šå±‚æ¬¡ä¾èµ–ä¿¡æ¯è·å–**ï¼šé¦–å…ˆå°è¯•ä»ä»»åŠ¡è®°å½•çš„ç›´æ¥å±æ€§è·å– `depends_on_indices`ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ä» `aux_data` å­—å…¸ä¸­è·å–ï¼Œç¡®ä¿ä¸ä¼šå› æ•°æ®å­˜å‚¨ä½ç½®ä¸åŒè€Œä¸¢å¤±ä¾èµ–ä¿¡æ¯ã€‚
2. **ä¸¥æ ¼çš„å®Œæ•´æ€§æ£€æŸ¥**ï¼šå¯¹æ¯ä¸ªä¾èµ–ä»»åŠ¡è¿›è¡Œå››é‡éªŒè¯ï¼š
   - çˆ¶ä»»åŠ¡å­˜åœ¨æ€§éªŒè¯
   - ç´¢å¼•èŒƒå›´éªŒè¯
   - ä»»åŠ¡è®°å½•å­˜åœ¨æ€§éªŒè¯
   - ä»»åŠ¡å®ŒæˆçŠ¶æ€å’Œè¾“å‡ºå†…å®¹éªŒè¯
3. **é˜²é‡å¤å¤„ç†æœºåˆ¶**ï¼šé€šè¿‡ `processed_context_source_ids` é›†åˆè·Ÿè¸ªå·²å¤„ç†çš„ä¸Šä¸‹æ–‡æºIDï¼Œé¿å…å¾ªç¯ä¾èµ–å¯¼è‡´çš„é‡å¤å¤„ç†ã€‚

```mermaid
graph TB
subgraph "å®Œæ•´æ€§æ£€æŸ¥"
A[çˆ¶ä»»åŠ¡å­˜åœ¨] --> B[ç´¢å¼•åœ¨èŒƒå›´å†…]
B --> C[ä»»åŠ¡è®°å½•å­˜åœ¨]
C --> D[çŠ¶æ€ä¸ºDONE]
D --> E[æœ‰è¾“å‡ºå†…å®¹]
end
subgraph "é”™è¯¯å¤„ç†"
F[ç´¢å¼•è¶Šç•Œ] --> G[è®°å½•è­¦å‘Š]
H[è®°å½•ç¼ºå¤±] --> G
I[çŠ¶æ€æœªå®Œæˆ] --> G
J[è¾“å‡ºä¸ºç©º] --> G
end
E --> K[æˆåŠŸæ·»åŠ ä¸Šä¸‹æ–‡]
G --> L[è·³è¿‡è¯¥ä¾èµ–]
```

**å›¾è¡¨æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

**æœ¬èŠ‚æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)

## ä¾èµ–éªŒè¯æœºåˆ¶
ç³»ç»Ÿæä¾›äº†ç‹¬ç«‹çš„ `validate_task_dependencies` å‡½æ•°æ¥å…¨é¢éªŒè¯ä»»åŠ¡ä¾èµ–çš„å®Œæ•´æ€§ã€‚è¯¥å‡½æ•°åœ¨ä¸Šä¸‹æ–‡è§£æå‰æ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰ä¾èµ–æ¡ä»¶éƒ½å·²æ»¡è¶³ã€‚

```mermaid
sequenceDiagram
participant CurrentTask as å½“å‰ä»»åŠ¡
participant KnowledgeStore as çŸ¥è¯†åº“
participant Validator as éªŒè¯å™¨
Validator->>CurrentTask : è·å– depends_on_indices
alt å­˜åœ¨äºç›´æ¥å±æ€§
CurrentTask-->>Validator : è¿”å›ç›´æ¥å±æ€§å€¼
else å­˜åœ¨äº aux_data
CurrentTask-->>Validator : è¿”å› aux_data ä¸­çš„å€¼
else ä¸å­˜åœ¨
Validator-->>Validator : è¿”å›ç©ºåˆ—è¡¨
end
loop æ¯ä¸ªä¾èµ–ç´¢å¼•
Validator->>CurrentTask : æ£€æŸ¥ parent_task_id
Validator->>KnowledgeStore : è·å–çˆ¶ä»»åŠ¡è®°å½•
Validator->>Validator : éªŒè¯ç´¢å¼•èŒƒå›´
Validator->>KnowledgeStore : é€šè¿‡ç´¢å¼•è·å–ä¾èµ–ä»»åŠ¡ID
Validator->>KnowledgeStore : è·å–ä¾èµ–ä»»åŠ¡è®°å½•
Validator->>Validator : æ£€æŸ¥çŠ¶æ€æ˜¯å¦ä¸ºDONE
Validator->>Validator : æ£€æŸ¥æ˜¯å¦æœ‰è¾“å‡ºå†…å®¹
end
Validator->>Validator : æ±‡æ€»éªŒè¯ç»“æœ
Validator-->>è°ƒç”¨è€… : è¿”å›éªŒè¯ç»“æœå­—å…¸
```

**å›¾è¡¨æ¥æº**  
- [context_builder.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\context_builder.py#L80-L177)

**æœ¬èŠ‚æ¥æº**  
- [context_builder.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\context_builder.py#L80-L177)

### éªŒè¯å¼‚å¸¸ç±»å‹
éªŒè¯æœºåˆ¶è¦†ç›–äº†å¤šç§å¯èƒ½çš„å¼‚å¸¸æƒ…å†µï¼š

| å¼‚å¸¸ç±»å‹ | è§¦å‘æ¡ä»¶ | å¤„ç†æ–¹å¼ |
|---------|--------|--------|
| ç´¢å¼•è¶Šç•Œ | ä¾èµ–ç´¢å¼•è¶…å‡ºçˆ¶ä»»åŠ¡å­ä»»åŠ¡åˆ—è¡¨èŒƒå›´ | æ·»åŠ éªŒè¯é”™è¯¯ï¼Œæ ‡è®°éªŒè¯å¤±è´¥ |
| è®°å½•ç¼ºå¤± | ä¾èµ–ä»»åŠ¡IDåœ¨çŸ¥è¯†åº“ä¸­æ‰¾ä¸åˆ°å¯¹åº”è®°å½• | æ·»åŠ åˆ° missing_dependencies åˆ—è¡¨ï¼Œæ ‡è®°éªŒè¯å¤±è´¥ |
| çŠ¶æ€æœªå®Œæˆ | ä¾èµ–ä»»åŠ¡çŠ¶æ€ä¸æ˜¯ "DONE" | æ·»åŠ åˆ° incomplete_dependencies åˆ—è¡¨ï¼Œæ ‡è®°éªŒè¯å¤±è´¥ |
| è¾“å‡ºä¸ºç©º | ä¾èµ–ä»»åŠ¡æ²¡æœ‰ output_content æˆ– output_summary | æ·»åŠ éªŒè¯é”™è¯¯ï¼Œæ ‡è®°éªŒè¯å¤±è´¥ |
| çˆ¶ä»»åŠ¡ç¼ºå¤± | å½“å‰ä»»åŠ¡æœ‰ä¾èµ–ä½†æ²¡æœ‰çˆ¶ä»»åŠ¡ID | æ·»åŠ éªŒè¯é”™è¯¯ï¼Œç«‹å³è¿”å›å¤±è´¥ç»“æœ |

**æœ¬èŠ‚æ¥æº**  
- [context_builder.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\context_builder.py#L80-L177)

## æ—¥å¿—è°ƒè¯•ä¸æ•…éšœæ’é™¤
### æ—¥å¿—åˆ†ææ–¹æ³•
`DependencyContextStrategy` æä¾›äº†è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•ä¾èµ–é—®é¢˜ï¼š

```python
logger.info(f"ğŸ”— DependencyContextStrategy: Checking dependencies for task {current_task_record.task_id}")
logger.info(f"ğŸ”— DependencyContextStrategy: current_task_record.depends_on_indices = {getattr(current_task_record, 'depends_on_indices', 'NOT_FOUND')}")
logger.info(f"ğŸ”— DependencyContextStrategy: current_task_record.aux_data = {getattr(current_task_record, 'aux_data', 'NOT_FOUND')}")
logger.info(f"ğŸ”— DependencyContextStrategy: resolved depends_on_indices = {depends_on_indices}")
```

è¿™äº›æ—¥å¿—å¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½ä»¥ä¸‹é—®é¢˜ï¼š
- ä¾èµ–ç´¢å¼•æ˜¯å¦æ­£ç¡®è®¾ç½®
- æ•°æ®å­˜å‚¨ä½ç½®ï¼ˆç›´æ¥å±æ€§ vs aux_dataï¼‰
- è§£æåçš„ä¾èµ–åˆ—è¡¨æ˜¯å¦ç¬¦åˆé¢„æœŸ

### å¸¸è§æ•…éšœæ’é™¤æŒ‡å—
#### é—®é¢˜1ï¼šä¾èµ–ä¸Šä¸‹æ–‡ä¸ºç©º
**å¯èƒ½åŸå› **ï¼š
- `depends_on_indices` æœªæ­£ç¡®è®¾ç½®
- çˆ¶ä»»åŠ¡çš„ `child_task_ids_generated` åˆ—è¡¨ä¸ºç©º
- ä¾èµ–ä»»åŠ¡å°šæœªå®Œæˆï¼ˆçŠ¶æ€ä¸æ˜¯ DONEï¼‰

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ä»»åŠ¡è®°å½•ä¸­çš„ `depends_on_indices` å­—æ®µ
2. éªŒè¯çˆ¶ä»»åŠ¡æ˜¯å¦æœ‰ç”Ÿæˆçš„å­ä»»åŠ¡IDåˆ—è¡¨
3. ç¡®è®¤ä¾èµ–ä»»åŠ¡çš„çŠ¶æ€æ˜¯å¦ä¸ºå·²å®Œæˆ

#### é—®é¢˜2ï¼šç´¢å¼•è¶Šç•Œé”™è¯¯
**å¯èƒ½åŸå› **ï¼š
- ä¾èµ–ç´¢å¼•å€¼å¤§äºçˆ¶ä»»åŠ¡å­ä»»åŠ¡æ•°é‡
- å­ä»»åŠ¡ç”Ÿæˆé¡ºåºä¸ä¾èµ–å…³ç³»ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿åœ¨ç”Ÿæˆå­ä»»åŠ¡æ—¶ä¿æŒç¨³å®šçš„é¡ºåº
- åœ¨è®¾ç½®ä¾èµ–ç´¢å¼•å‰éªŒè¯å…¶æœ‰æ•ˆæ€§

#### é—®é¢˜3ï¼šé€šç”¨æ‘˜è¦è¢«å¿½ç•¥
**ç°è±¡**ï¼š
æ—¥å¿—æ˜¾ç¤º "Existing output_summary is generic" å¹¶é€‰æ‹©ä½¿ç”¨åŸå§‹å†…å®¹

**åŸå› **ï¼š
ç³»ç»Ÿå†…ç½®äº†é€šç”¨æ‘˜è¦æ£€æµ‹æœºåˆ¶ï¼Œä¼šè¯†åˆ«å¹¶è·³è¿‡ä»¥ä¸‹æ¨¡å¼çš„æ‘˜è¦ï¼š
- ä»¥ "planned with", "execution completed" ç­‰å¼€å¤´
- é•¿åº¦å°‘äº20ä¸ªå­—ç¬¦
- åŒ…å« "data type:", "structured output:" ç­‰æ¨¡æ¿åŒ–æ–‡æœ¬

**å»ºè®®**ï¼š
ä¸ºä»»åŠ¡é…ç½®æ›´å…·ä½“çš„æ‘˜è¦ç”Ÿæˆæç¤ºï¼Œé¿å…ä½¿ç”¨é€šç”¨æ¨¡æ¿ã€‚

**æœ¬èŠ‚æ¥æº**  
- [strategies.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\strategies.py#L614-L765)
- [context_builder.py](file://src\sentientresearchagent\hierarchical_agent_framework\context\context_builder.py#L80-L177)

## æ€»ç»“
`DependencyContextStrategy` æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ä¸Šä¸‹æ–‡è§£æç­–ç•¥ï¼Œé€šè¿‡ä¸¥è°¨çš„ç´¢å¼•è§£æã€å†…å®¹å¤„ç†å’Œå®Œæ•´æ€§éªŒè¯æœºåˆ¶ï¼Œç¡®ä¿äº†ä»»åŠ¡é—´ä¾èµ–å…³ç³»çš„å¯é ä¼ é€’ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š
1. **å¯é æ€§**ï¼šå¤šé‡éªŒè¯æœºåˆ¶ç¡®ä¿åªæœ‰å®Œæ•´ã€å¯ç”¨çš„ä¾èµ–å†…å®¹æ‰ä¼šè¢«çº³å…¥ä¸Šä¸‹æ–‡
2. **çµæ´»æ€§**ï¼šæ”¯æŒä»ä¸åŒä½ç½®è·å–ä¾èµ–ä¿¡æ¯ï¼Œé€‚åº”å„ç§æ•°æ®å­˜å‚¨æ¨¡å¼
3. **å¯è°ƒè¯•æ€§**ï¼šè¯¦ç»†çš„æ—¥å¿—è¾“å‡ºä¾¿äºå¿«é€Ÿå®šä½å’Œè§£å†³ä¾èµ–é—®é¢˜
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ™ºèƒ½çš„å†…å®¹å¤„ç†ç­–ç•¥å¹³è¡¡äº†ä¿¡æ¯å®Œæ•´æ€§å’Œè®¡ç®—å¼€é”€

è¯¥ç­–ç•¥çš„è®¾è®¡ä½“ç°äº†å¯¹å…³é”®è¾“å…¥ä¿éšœçš„é«˜åº¦é‡è§†ï¼Œæ˜¯æ•´ä¸ªåˆ†å±‚æ™ºèƒ½ä½“æ¡†æ¶ç¨³å®šè¿è¡Œçš„é‡è¦åŸºçŸ³ã€‚