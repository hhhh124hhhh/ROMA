# GLM-4.5 简化配置（无外部工具包依赖）
# 专注于智谱AI GLM-4.5核心功能，不依赖外部API服务

agents:
  # =============================================================================
  # GLM-4.5 主规划器 - 负责任务分解和规划
  # =============================================================================
  
  - name: "GLM45MasterPlanner"
    type: "planner"
    adapter_class: "PlannerAdapter"
    description: "GLM-4.5驱动的主规划器，具备强大的中文理解和逻辑推理能力"
    model:
      provider: "openai"
      model_id: "glm-4.5"
      api_base: "https://open.bigmodel.cn/api/paas/v4/"
      temperature: 0.3  # Lower temperature for more focused planning
      max_tokens: 5000  # Increased for detailed planning
      top_p: 0.85
    prompt_source: "prompts.planner_prompts.PLANNER_SYSTEM_MESSAGE"
    response_model: "PlanOutput"
    tools: []  # 不使用外部工具包
    registration:
      action_keys:
        - action_verb: "plan"
          task_type: "SEARCH"
        - action_verb: "plan"
          task_type: "WRITE"
        - action_verb: "plan"
          task_type: "THINK"
        - action_verb: "plan"
          task_type: "ANALYZE"
      named_keys: ["GLM45MasterPlanner", "master_planner", "glm45_planner"]
    enabled: true

  # =============================================================================
  # GLM-4.5 智能执行器 - 基础执行功能
  # =============================================================================
  
  - name: "GLM45SmartExecutor"
    type: "executor"
    adapter_class: "ExecutorAdapter"
    description: "GLM-4.5驱动的智能执行器，支持推理、分析、写作等核心任务"
    model:
      provider: "openai"
      model_id: "glm-4.5"
      api_base: "https://open.bigmodel.cn/api/paas/v4/"
      temperature: 0.7
      max_tokens: 3500
      top_p: 0.95
    prompt_source: "prompts.executor_prompts.REASONING_EXECUTOR_SYSTEM_MESSAGE"
    response_model: null  # 执行器不需要结构化输出
    tools:
      - name: "PythonTools"
        params:
          save_and_run: true  # 启用E2B沙箱执行
      - "ReasoningTools"
      - "web_search"  # 启用网络搜索
    registration:
      action_keys:
        - action_verb: "execute"
          task_type: "SEARCH"
        - action_verb: "execute"  
          task_type: "THINK"
        - action_verb: "execute"
          task_type: "WRITE"
      named_keys: ["GLM45SmartExecutor", "smart_executor", "glm45_executor"]
    enabled: true

  # =============================================================================
  # GLM-4.5 专业写作器 - 高质量内容生成
  # =============================================================================
  
  - name: "GLM45ProWriter"
    type: "executor"
    adapter_class: "ExecutorAdapter"
    description: "GLM-4.5专业写作器，专注于高质量中文内容创作和报告生成"
    model:
      provider: "openai"
      model_id: "glm-4.5"
      api_base: "https://open.bigmodel.cn/api/paas/v4/"
      temperature: 0.8
      max_tokens: 5000
      top_p: 0.95
    prompt_source: "prompts.executor_prompts.BASIC_REPORT_WRITER_SYSTEM_MESSAGE"
    response_model: null  # 写作器不需要结构化输出
    tools:
      - name: "PythonTools"
        params:
          save_and_run: true  # 启用E2B沙箱执行
      - "ReasoningTools"  # 推理工具
    registration:
      action_keys:
        - action_verb: "execute"
          task_type: "WRITE"
      named_keys: ["GLM45ProWriter", "pro_writer", "glm45_writer"]
    enabled: true

  # =============================================================================
  # GLM-4.5 结果聚合器 - 信息整合专家
  # =============================================================================
  
  - name: "GLM45MasterAggregator"
    type: "aggregator"
    adapter_class: "AggregatorAdapter"
    description: "GLM-4.5结果聚合器，擅长整合多源信息并生成连贯的最终报告"
    model:
      provider: "openai"
      model_id: "glm-4.5"
      api_base: "https://open.bigmodel.cn/api/paas/v4/"
      temperature: 0.5
      max_tokens: 6000
      top_p: 0.9
    prompt_source: "prompts.aggregator_prompts.DEFAULT_AGGREGATOR_SYSTEM_MESSAGE"
    response_model: null  # 聚合器不需要结构化输出
    tools: []  # 聚合不需要工具，仅整合信息
    registration:
      action_keys:
        - action_verb: "aggregate"
          task_type: "SEARCH"
        - action_verb: "aggregate"
          task_type: "THINK"
        - action_verb: "aggregate"
          task_type: "WRITE"
      named_keys: ["GLM45MasterAggregator", "master_aggregator", "glm45_aggregator"]
    enabled: true

  # =============================================================================
  # GLM-4.5 任务原子化器 - 复杂任务分解
  # =============================================================================
  
  - name: "GLM45AtomizerMaster"
    type: "atomizer"
    adapter_class: "AtomizerAdapter"
    description: "GLM-4.5任务原子化器，负责将复杂任务分解为可执行的原子任务"
    model:
      provider: "openai"
      model_id: "glm-4.5"
      api_base: "https://open.bigmodel.cn/api/paas/v4/"
      temperature: 0.2  # Very low for precise atomization
      max_tokens: 4000
      top_p: 0.8
    prompt_source: "prompts.atomizer_prompts.ATOMIZER_SYSTEM_MESSAGE"
    response_model: "AtomizerOutput"
    tools: []  # 原子化任务不需要外部工具
    registration:
      named_keys: ["GLM45AtomizerMaster", "atomizer_master", "glm45_atomizer"]
    enabled: true

# =============================================================================
# 元数据信息
# =============================================================================

metadata:
  name: "GLM-4.5 Enhanced Agent Suite (E2B-Enabled)"
  description: "增强版GLM-4.5代理套件，启用E2B沙箱和核心工具，无金融工具包依赖"
  version: "1.0.1"
  author: "SentientResearchAgent"
  created_date: "2024-12-24"
  model_info:
    primary_model: "glm-4.5"
    provider: "zhipuai"
    api_version: "v4"
    features:
      - "中文理解优化"
      - "长上下文支持"
      - "多任务推理"
      - "专业写作"
      - "逻辑分析"
  
  # 最小环境变量要求
  required_env_vars:
    - "ZHIPUAI_API_KEY"  # 仅需要智谱AI密钥
  
  # 移除的可选功能（仅限金融工具包）
  removed_features:
    - "加密货币数据工具包"
    - "区块链分析工具"
    - "DeFi数据工具"
  
  # 保留并增强的核心功能
  core_features:
    - "E2B代码执行沙箱"  # 已启用
    - "网络搜索"  # 已启用
    - "推理工具"  # 已启用
    - "内容生成"
    - "逻辑推理"
    - "任务规划"
    - "结果聚合"